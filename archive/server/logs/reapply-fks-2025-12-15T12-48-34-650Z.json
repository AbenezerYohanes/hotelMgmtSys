[
  {
    "info": {
      "table": "hotels",
      "constraint": "fk_hotels_created_by",
      "stmt": "-- Foreign key constraints for Hotel Management schema\r\n-- These were extracted from schema.sql so the main schema can be applied\r\n-- Run this file after verifying tables and column types are correct\r\n\r\nALTER TABLE `hotels` ADD CONSTRAINT `fk_hotels_created_by` FOREIGN KEY (`created_by`) REFERENCES `users`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "departments",
      "constraint": "fk_departments_manager",
      "stmt": "ALTER TABLE `departments` ADD CONSTRAINT `fk_departments_manager` FOREIGN KEY (`manager_id`) REFERENCES `users`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "employees",
      "constraint": "fk_employees_user",
      "stmt": "ALTER TABLE `employees` ADD CONSTRAINT `fk_employees_user` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "employees",
      "constraint": "fk_employees_department",
      "stmt": "ALTER TABLE `employees` ADD CONSTRAINT `fk_employees_department` FOREIGN KEY (`department_id`) REFERENCES `departments`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "rooms",
      "constraint": "fk_rooms_hotel",
      "stmt": "ALTER TABLE `rooms` ADD CONSTRAINT `fk_rooms_hotel` FOREIGN KEY (`hotel_id`) REFERENCES `hotels`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "rooms",
      "constraint": "fk_rooms_room_type",
      "stmt": "ALTER TABLE `rooms` ADD CONSTRAINT `fk_rooms_room_type` FOREIGN KEY (`room_type_id`) REFERENCES `room_types`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "bookings",
      "constraint": "fk_bookings_room",
      "stmt": "ALTER TABLE `bookings` ADD CONSTRAINT `fk_bookings_room` FOREIGN KEY (`room_id`) REFERENCES `rooms`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "bookings",
      "constraint": "fk_bookings_guest",
      "stmt": "ALTER TABLE `bookings` ADD CONSTRAINT `fk_bookings_guest` FOREIGN KEY (`guest_id`) REFERENCES `guests`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "bookings",
      "constraint": "fk_bookings_user",
      "stmt": "ALTER TABLE `bookings` ADD CONSTRAINT `fk_bookings_user` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": false,
    "error": "Cannot add or update a child row: a foreign key constraint fails (`hotel_management`.`#sql-2634_4f`, CONSTRAINT `fk_bookings_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE)"
  },
  {
    "info": {
      "table": "bookings",
      "constraint": "fk_bookings_hotel",
      "stmt": "ALTER TABLE `bookings` ADD CONSTRAINT `fk_bookings_hotel` FOREIGN KEY (`hotel_id`) REFERENCES `hotels`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": "payments",
      "constraint": "fk_payments_booking",
      "stmt": "ALTER TABLE `payments` ADD CONSTRAINT `fk_payments_booking` FOREIGN KEY (`booking_id`) REFERENCES `bookings`(`id`) ON DELETE SET NULL ON UPDATE CASCADE"
    },
    "ok": true,
    "error": null
  },
  {
    "info": {
      "table": null,
      "constraint": null,
      "stmt": "-- Re-enable foreign key checks after applying constraints\r\nSET FOREIGN_KEY_CHECKS = 1"
    },
    "ok": false,
    "error": "Could not parse child table"
  }
]